# Contexte du Projet CaddyPanel (pour LLM)

Point d'entrÃ©e pour session de travail. Objectif: concision pour IA, pas pour humain. Transmettre toutes les infos clÃ©s, sans tokens gaspillÃ©s en mise en page.

======================================================================
1. RÃˆGLES OPÃ‰RATIONNELLES
======================================================================

- Fichier Manquant: Le signaler, demander son contenu, ne jamais l'inventer.
- Modification Fichier: Pour un patch simple, fournir une commande `sed` en une ligne. Si complexe ou risquÃ©, fournir le contenu complet du fichier. Ne pas utiliser d'autres outils (`awk`, `patch`).
- Flux de Travail: Proposer une modification, puis attendre l'accord explicite de l'utilisateur avant de continuer.
- PÃ©rimÃ¨tre: Ne modifier que ce qui est strictement nÃ©cessaire Ã  la tÃ¢che demandÃ©e. Pas de zÃ¨le.
- VÃ©rification: AprÃ¨s chaque modification, suggÃ©rer des points de contrÃ´le ou des tests simples.


======================================================================
2. ARBORESCENCE DU PROJET
======================================================================

ğŸ“ caddyfile/
  ğŸ“„ Caddyfile
ğŸ“ docker/
  ğŸ“„ entrypoint.sh
  ğŸ“„ supervisord.conf
ğŸ“ static/
  ğŸ“„ script.js
  ğŸ“„ style.css
ğŸ“ templates/
  ğŸ“„ index.html
  ğŸ“„ login.html
  ğŸ“„ setup.html
  ğŸ“„ stats.html
ğŸ“„ .dockerignore
ğŸ“„ .env
ğŸ“„ app.py
ğŸ“„ context.txt
ğŸ“„ docker-compose.yml
ğŸ“„ Dockerfile
ğŸ“„ LICENSE
ğŸ“„ README.md
ğŸ“„ requirements.txt


======================================================================
3. NOTES SUR LES FICHIERS
======================================================================

- app.py: Backend Flask. Sert UI/API. GÃ¨re users/prefs/Caddyfile. DÃ©clenche le reload de Caddy.
- Dockerfile: Build multi-stage de l'image Docker. RÃ©cupÃ¨re Caddy, installe Python/dÃ©pendances/app.
- docker-compose.yml: Orchestration du dÃ©ploiement. DÃ©finit service, volumes, lit le .env.
- docker/entrypoint.sh: Script d'init au dÃ©marrage conteneur. CrÃ©e configs par dÃ©faut, gÃ¨re permissions.
- docker/supervisord.conf: Config Supervisor. GÃ¨re les processus `caddy` (root) et `flaskapp` (user). Redirige logs.
- templates/: Templates HTML (Jinja2) pour Flask. (index, stats, login, setup).
- static/: Fichiers statiques. `script.js` (logique UI, API, parsing Caddyfile client-side), `style.css` (thÃ¨mes).
- caddyfile/Caddyfile: Caddyfile d'exemple pour l'initialisation.
- requirements.txt: DÃ©pendances Python (Flask).
- .env: Fichier d'exemple pour variables d'environnement (FLASK_SECRET_KEY, TZ).
- .dockerignore: Exclut fichiers inutiles du build Docker.
- README.md: Instructions de build et d'exÃ©cution.
- context.txt: Ce fichier. Contexte pour le LLM.


======================================================================
4. Ã‰TAT DU PROJET
======================================================================

ACTIVE_BUGS:
- Stats/Logs: La page de statistiques ne s'affiche pas correctement ou n'affiche aucune donnÃ©e, suggÃ©rant un problÃ¨me avec la collecte ou le traitement des logs (`read_caddy_logs` dans `app.py` ou la configuration du logging de Caddy).

ROADMAP:
- Aucun pour le moment.

IN_PROGRESS:
- Aucun pour le moment.

COMPLETED_FEATURES:
- Architecture conteneurisÃ©e (Docker/Compose).
- Gestion des processus (Supervisor).
- Initialisation automatique (entrypoint.sh).
- Persistance des donnÃ©es (volumes).
- Authentification utilisateur.
- UI de gestion du Caddyfile (Configurator + Raw Editor).
- Sauvegarde et rechargement automatiques de Caddy.
- UI de gestion des prÃ©fÃ©rences.
- Page de statistiques de base.
- Assistant de configuration des logs Caddy.
- Build Docker multi-architecture.
- **BUGFIX**: Correction de l'Ã©tat de la case "Skip TLS Verify" dans l'UI qui n'Ã©tait pas correctement restaurÃ© aprÃ¨s un rechargement de page.

======================================================================
5. RÃˆGLES DE MAINTENANCE DE CE FICHIER
======================================================================

- Mettre Ã  jour ce fichier Ã  chaque modification (feature, bugfix).
- Ã€ la fin de chaque session, fournir le contenu complet et Ã  jour de ce fichier.